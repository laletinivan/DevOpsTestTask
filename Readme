Скрипт работает только с Unix систем из-за библиотеки paramiko, устанавливает и настраивает postgresql на машины с ОС Ubuntu.
Для подключения к хосту, на нем должен работать ssh сервер на 22 порту.
Для работы скрипта используются 2 библиотеки:
- paramiko, для установления ssh соединения и отправки команд
- psycopg2, для проверки удаленного подключения к БД
Проблемы с которыми столкнулся:
- установка библиотеки psycopg2, для установки требуются пакеты psycopg2-binary, libpq-dev, python-dev
- редактирование файлов postgresql.conf и pg_hba.conf, в пути к файлам лежит папка название которой зависит от установленной версии postgresql, поэтому пришлось воспользоваться командой find
- проблемы с безопасным подключением, в pg_hba.conf установил метод аутентификации trust, то есть подключение без пароля